import{r as g,_ as w,R as N,e as q,P as u,f as T,T as S,j as e,a as F,o as y,p as f,C as I}from"./index-D_7tBkkK.js";import{C as k,a as R}from"./CCardBody-DM6roHT9.js";import{C as A}from"./CCardHeader-B1sgqhlN.js";import{C as E}from"./CNav-CenA_rLP.js";import{C as O}from"./CForm--cmEAgmW.js";import{C as l,a}from"./CRow-BKJ6uQ1F.js";import{C as o}from"./CFormInput-CWc3HqwI.js";import{C as B}from"./CFormSelect-DqjreL12.js";import{C as P}from"./CFormTextarea-DbO5Wx_m.js";import"./CFormControlWrapper-xtn8zmSN.js";const v=g.forwardRef((c,p)=>{var{children:r,className:m}=c,i=w(c,["children","className"]);return N.createElement("div",Object.assign({className:q("tab-content",m)},i,{ref:p}),r)});v.propTypes={children:u.node,className:u.string};v.displayName="CTabContent";const j=g.forwardRef((c,p)=>{var{children:r,className:m,onHide:i,onShow:x,transition:b=!0,visible:h}=c,C=w(c,["children","className","onHide","onShow","transition","visible"]);const t=g.useRef(null),s=T(p,t);return N.createElement(S,{in:h,nodeRef:t,onEnter:x,onExit:i,timeout:150},n=>N.createElement("div",Object.assign({className:q("tab-pane",{active:h,fade:b,show:n==="entered"},m)},C,{ref:s}),r))});j.propTypes={children:u.node,className:u.string,onHide:u.func,onShow:u.func,transition:u.bool,visible:u.bool};j.displayName="CTabPane";const M=["Apartment","Condo","House","Townhouse","Studio"],D=["Air Conditioned","Car Parking","Laundry Room","Balcony","Gym","Internet","Garden","Swimming Pool","Pets Allowed"],J=()=>{const[c,p]=g.useState(0),[r,m]=g.useState({propertyName:"",rentPrice:"",propertyType:"",registeredOwner:"",areaMeasurement:"",commissionPercentage:"",depositPrice:"",description:"",locationSearch:"",address:{street:"",barangay:"",city:"",province:""},propertyNotes:"",units:0,bedrooms:0,bathrooms:0,selectedFeatures:[],propertyImages:[]}),i=t=>{const{name:s,value:n}=t.target;m(d=>({...d,[s]:n}))},x=t=>{const{name:s,value:n}=t.target;m(d=>({...d,address:{...d.address,[s]:n}}))},b=t=>{m(s=>({...s,selectedFeatures:s.selectedFeatures.includes(t)?s.selectedFeatures.filter(n=>n!==t):[...s.selectedFeatures,t]}))},h=t=>{const s=Array.from(t.target.files);if(s.length>5){alert("You can upload a maximum of 5 images.");return}const n=s.filter(d=>d.size<=5*1024*1024&&["image/jpeg","image/png","image/gif"].includes(d.type));n.length!==s.length&&alert("Some files are invalid. Only jpg, png, and gif files under 5MB are accepted."),m(d=>({...d,propertyImages:n}))},C=async t=>{t.preventDefault();const s=new FormData;Object.keys(r).forEach(n=>{n==="address"?Object.keys(r.address).forEach(d=>{s.append(`address[${d}]`,r.address[d])}):n==="propertyImages"?r.propertyImages.forEach(d=>s.append("propertyImages",d)):s.append(n,r[n])});try{const n=await fetch("http://localhost:5000/api/properties",{method:"POST",body:s,headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!n.ok)throw new Error(await n.text());alert("Property added successfully!"),m({propertyName:"",rentPrice:"",propertyType:"",registeredOwner:"",areaMeasurement:"",commissionPercentage:"",depositPrice:"",description:"",locationSearch:"",address:{street:"",barangay:"",city:"",province:""},propertyNotes:"",units:0,bedrooms:0,bathrooms:0,selectedFeatures:[],propertyImages:[]})}catch(n){console.error(n),alert("Error adding property.")}};return e.jsxs(F,{className:"mt-5",children:[e.jsx("h4",{className:"mb-4",children:"Add New Property"}),e.jsxs(k,{children:[e.jsx(A,{children:e.jsxs(E,{variant:"tabs",className:"d-flex justify-content-between w-100",children:[e.jsx(y,{className:"flex-fill text-center",children:e.jsx(f,{className:"w-100",active:c===0,onClick:()=>p(0),children:"Basic Details"})}),e.jsx(y,{className:"flex-fill text-center",children:e.jsx(f,{className:"w-100",active:c===1,onClick:()=>p(1),children:"Location"})}),e.jsx(y,{className:"flex-fill text-center",children:e.jsx(f,{className:"w-100",active:c===2,onClick:()=>p(2),children:"Features & Amenities"})}),e.jsx(y,{className:"flex-fill text-center",children:e.jsx(f,{className:"w-100",active:c===3,onClick:()=>p(3),children:"Property Images"})})]})}),e.jsx(R,{children:e.jsxs(O,{onSubmit:C,children:[e.jsxs(v,{children:[e.jsxs(j,{visible:c===0,children:[e.jsxs(l,{className:"mb-3",children:[e.jsx(a,{md:6,children:e.jsx(o,{type:"text",name:"propertyName",placeholder:"Property Name",value:r.propertyName,onChange:i,required:!0})}),e.jsx(a,{md:6,children:e.jsx(o,{type:"number",name:"rentPrice",placeholder:"Rent Price (₱)",value:r.rentPrice,onChange:i,required:!0})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(a,{md:6,children:e.jsxs(B,{name:"propertyType",value:r.propertyType,onChange:i,required:!0,children:[e.jsx("option",{value:"",children:"Select Property Type"}),M.map((t,s)=>e.jsx("option",{value:t,children:t},s))]})}),e.jsx(a,{md:6,children:e.jsx(o,{type:"text",name:"registeredOwner",placeholder:"Registered Property Owner",value:r.registeredOwner,onChange:i,required:!0})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(a,{md:6,children:e.jsx(o,{type:"number",name:"areaMeasurement",placeholder:"Area Measurement (sqm)",value:r.areaMeasurement,onChange:i,required:!0})}),e.jsx(a,{md:6,children:e.jsx(o,{type:"number",name:"commissionPercentage",placeholder:"Agency Commission (%)",value:r.commissionPercentage,onChange:i,required:!0})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(a,{md:6,children:e.jsx(o,{type:"number",name:"depositPrice",placeholder:"Deposit Price (₱)",value:r.depositPrice,onChange:i,required:!0})}),e.jsx(a,{md:6,children:e.jsx(P,{name:"description",placeholder:"Property Description",rows:"3",value:r.description,onChange:i,required:!0})})]})]}),e.jsxs(j,{visible:c===1,children:[e.jsx(l,{className:"mb-3",children:e.jsx(a,{md:12,children:e.jsx(o,{type:"text",name:"locationSearch",placeholder:"Search Location",value:r.locationSearch,onChange:i,required:!0})})}),e.jsxs(l,{className:"mb-3",children:[e.jsx(a,{md:6,children:e.jsx(o,{type:"text",name:"street",placeholder:"Street",value:r.address.street,onChange:x,required:!0})}),e.jsx(a,{md:6,children:e.jsx(o,{type:"text",name:"barangay",placeholder:"Barangay",value:r.address.barangay,onChange:x,required:!0})})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(a,{md:6,children:e.jsx(o,{type:"text",name:"city",placeholder:"City",value:r.address.city,onChange:x,required:!0})}),e.jsx(a,{md:6,children:e.jsx(o,{type:"text",name:"province",placeholder:"Province",value:r.address.province,onChange:x,required:!0})})]})]}),e.jsxs(j,{visible:c===2,children:[e.jsx(l,{className:"mb-3",children:e.jsx(a,{md:12,children:e.jsx(P,{name:"propertyNotes",placeholder:"Property Notes",rows:"3",value:r.propertyNotes,onChange:i,required:!0})})}),e.jsxs(l,{className:"mb-3",children:[e.jsx(a,{md:4,children:e.jsx(o,{type:"number",name:"units",placeholder:"Number of Units/Rooms",value:r.units,onChange:i,required:!0})}),e.jsx(a,{md:4,children:e.jsx(o,{type:"number",name:"bedrooms",placeholder:"Number of Bedrooms",value:r.bedrooms,onChange:i,required:!0})}),e.jsx(a,{md:4,children:e.jsx(o,{type:"number",name:"bathrooms",placeholder:"Number of Bathrooms",value:r.bathrooms,onChange:i,required:!0})})]}),e.jsx(l,{className:"mb-3",children:D.map((t,s)=>e.jsx(a,{md:4,children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:`feature-${s}`,checked:r.selectedFeatures.includes(t),onChange:()=>b(t)}),e.jsx("label",{className:"form-check-label",htmlFor:`feature-${s}`,children:t})]})},s))})]}),e.jsxs(j,{visible:c===3,children:[e.jsx(l,{className:"mb-3",children:e.jsx(a,{md:12,children:e.jsx(o,{type:"file",name:"propertyImages",multiple:!0,onChange:h,accept:".jpg,.png,.gif",required:!0})})}),e.jsx(l,{className:"mb-3",children:e.jsx(a,{md:12,children:e.jsx(o,{type:"file",name:"propertyImages",multiple:!0,onChange:h,accept:".jpg,.png,.gif",required:!0})})}),e.jsx(l,{className:"mb-3",children:e.jsx(a,{md:12,children:e.jsx(o,{type:"file",name:"propertyImages",multiple:!0,onChange:h,accept:".jpg,.png,.gif",required:!0})})}),e.jsx(l,{className:"mb-3",children:e.jsx(a,{md:12,children:e.jsx(o,{type:"file",name:"propertyImages",multiple:!0,onChange:h,accept:".jpg,.png,.gif",required:!0})})}),e.jsx(l,{className:"mb-3",children:e.jsx(a,{md:12,children:e.jsx(o,{type:"file",name:"propertyImages",multiple:!0,onChange:h,accept:".jpg,.png,.gif",required:!0})})}),e.jsx("small",{className:"text-muted",children:"Upload up to 5 images. Maximum file size: 5MB. Accepted formats: jpg, png, gif."})]})]}),e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx(I,{type:"submit",style:{backgroundColor:"#F28D35",color:"white",fontWeight:"bold"},children:"Add Property"})})]})})]})]})};export{J as default};
