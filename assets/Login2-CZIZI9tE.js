import{b as S,u as k,c as L,r as o,j as e,l as N,C as p,a as F,d as I}from"./index-DY6aUkKa.js";import{b as A}from"./index-DflCC3IB.js";import{C as R,a as P}from"./CRow-Bt_H3tnM.js";import{C as z}from"./CForm-Cu2DR-nS.js";import{C as u}from"./CFormInput-BgVsnZTC.js";import{C as E,a as D}from"./CInputGroupText-B85FU_oA.js";import"./CFormControlWrapper-CoI-bp5M.js";const W=()=>{var g;const x=S(),a=k(),{setUser:h}=L(),n=void 0,f=((g=x.state)==null?void 0:g.email)||"",[l,b]=o.useState(f),[i,y]=o.useState(""),[j,C]=o.useState(!1),[d,w]=o.useState(!1),[c,m]=o.useState(!1),v=async s=>{s.preventDefault(),m(!0);try{const r=await fetch(`${n}/api/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,password:i})}),t=await r.json();console.log("API URL:",n),r.ok&&t.token?(console.log("%c[Login2] Login successful!","color: green"),console.log("Token:",t.token),console.log("User:",t.user),localStorage.setItem("authToken",t.token),h(t.user),alert("Login successful!"),a("/cards",{replace:!0})):alert(t.error||"Invalid email or password.")}catch(r){console.error("Login error:",r),alert("Server error. Please try again later.")}finally{m(!1)}};return e.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-column",style:{minHeight:"100vh"},children:[e.jsxs("div",{style:{background:"#1D2B57",height:80,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 50px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx("img",{src:N,alt:"CondoEase Logo",style:{height:64,marginRight:12}})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:34},children:[e.jsx("span",{style:{color:"white",fontSize:20},children:"Don't have an account?"}),e.jsx(p,{className:"text-white fw-bold px-4",style:{borderRadius:20,fontSize:20,backgroundColor:"#F28D35"},onClick:()=>a("/register"),children:"Sign up"})]})]}),e.jsx(F,{className:"flex-grow-1 d-flex flex-column align-items-center justify-content-center",children:e.jsx(R,{className:"justify-content-center w-100",children:e.jsxs(P,{xs:12,md:7,lg:5,xl:4,children:[e.jsx("div",{className:"text-center mb-4 mt-5",children:e.jsx("h2",{className:"fw-bold mb-2 text-start",style:{fontSize:32},children:"Login"})}),e.jsxs(z,{onSubmit:v,children:[e.jsx("div",{className:"mb-2 fw-semibold text-start",children:"Email"}),e.jsx(u,{type:"email",placeholder:"email@gmail.com",value:l,onChange:s=>b(s.target.value),className:"mb-3",required:!0,style:{borderColor:"#A3C49A",borderRadius:10,fontSize:16,padding:"16px 16px"}}),e.jsx("div",{className:"mb-2 fw-semibold text-start",children:"Password"}),e.jsxs(E,{className:"mb-3",children:[e.jsx(u,{type:j?"text":"password",placeholder:"Enter your password",value:i,onChange:s=>y(s.target.value),required:!0,style:{borderColor:"#A3C49A",borderRadius:10,fontSize:16,padding:"16px 16px"}}),e.jsx(D,{style:{background:"transparent",cursor:"pointer",borderColor:"#A3C49A"},onClick:()=>C(s=>!s),children:e.jsx(A,{color:"#A3C49A"})})]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"keepLoggedIn",checked:d,onChange:()=>w(!d),style:{marginRight:8}}),e.jsx("label",{htmlFor:"keepLoggedIn",style:{fontSize:14},children:"Keep me logged in for 30 days"})]}),e.jsx("button",{type:"button",className:"btn p-0",style:{color:"#F28D35",fontWeight:700,fontSize:14,background:"none",border:"none"},onClick:()=>a("/forgot-password"),children:"Forgot Password?"})]}),e.jsx("div",{className:"d-grid mb-2 mt-4",children:e.jsx(p,{className:"text-white fw-bold",style:{borderRadius:50,fontSize:25,padding:"13px 0",width:"90%",margin:"0 auto",backgroundColor:"#F28D35"},type:"submit",disabled:c,children:c?e.jsx(I,{style:{width:"2rem",height:"2rem",color:"#FFFFFF"}}):"Login"})})]})]})})})]})};export{W as default};
