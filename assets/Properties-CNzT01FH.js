import{r as y,_ as v,R as C,e as P,P as m,k as S,T as F,j as e,a as I,n as f,o as b,C as k}from"./index-BymmDDR5.js";import{C as R,a as O}from"./CCardBody-DgBPrxe0.js";import{C as A}from"./CCardHeader-uiPd5p4R.js";import{C as E}from"./CForm-grtOCtrq.js";import{C as c,a as s}from"./CRow-DqhEp4IT.js";import{C as i}from"./CFormInput-AnL8oJsj.js";import{C as B}from"./CFormSelect-P6UnNcAT.js";import{C as T}from"./CFormTextarea-BpSsnyHn.js";import"./CFormControlWrapper-DIiFT2Il.js";const w=y.forwardRef((l,h)=>{var{children:r,as:p="ul",className:o,layout:x,variant:j}=l,u=v(l,["children","as","className","layout","variant"]);return C.createElement(p,Object.assign({className:P("nav",j==="enclosed-pills"&&"nav-enclosed",{[`nav-${x}`]:x,[`nav-${j}`]:j},o),role:"navigation"},u,{ref:h}),r)});w.propTypes={as:m.elementType,children:m.node,className:m.string,layout:m.oneOf(["fill","justified"]),variant:m.oneOf(["enclosed","enclosed-pills","pills","tabs","underline","underline-border"])};w.displayName="CNav";const q=y.forwardRef((l,h)=>{var{children:r,className:p}=l,o=v(l,["children","className"]);return C.createElement("div",Object.assign({className:P("tab-content",p)},o,{ref:h}),r)});q.propTypes={children:m.node,className:m.string};q.displayName="CTabContent";const g=y.forwardRef((l,h)=>{var{children:r,className:p,onHide:o,onShow:x,transition:j=!0,visible:u}=l,N=v(l,["children","className","onHide","onShow","transition","visible"]);const t=y.useRef(null),a=S(h,t);return C.createElement(F,{in:u,nodeRef:t,onEnter:x,onExit:o,timeout:150},n=>C.createElement("div",Object.assign({className:P("tab-pane",{active:u,fade:j,show:n==="entered"},p)},N,{ref:a}),r))});g.propTypes={children:m.node,className:m.string,onHide:m.func,onShow:m.func,transition:m.bool,visible:m.bool};g.displayName="CTabPane";const M=["Apartment","Condo","House","Townhouse","Studio"],D=["Air Conditioned","Car Parking","Laundry Room","Balcony","Gym","Internet","Garden","Swimming Pool","Pets Allowed"],J=()=>{const[l,h]=y.useState(0),[r,p]=y.useState({propertyName:"",rentPrice:"",propertyType:"",registeredOwner:"",areaMeasurement:"",commissionPercentage:"",depositPrice:"",description:"",locationSearch:"",address:{street:"",barangay:"",city:"",province:""},propertyNotes:"",units:0,bedrooms:0,bathrooms:0,selectedFeatures:[],propertyImages:[]}),o=t=>{const{name:a,value:n}=t.target;p(d=>({...d,[a]:n}))},x=t=>{const{name:a,value:n}=t.target;p(d=>({...d,address:{...d.address,[a]:n}}))},j=t=>{p(a=>({...a,selectedFeatures:a.selectedFeatures.includes(t)?a.selectedFeatures.filter(n=>n!==t):[...a.selectedFeatures,t]}))},u=t=>{const a=Array.from(t.target.files);if(a.length>5){alert("You can upload a maximum of 5 images.");return}const n=a.filter(d=>d.size<=5*1024*1024&&["image/jpeg","image/png","image/gif"].includes(d.type));n.length!==a.length&&alert("Some files are invalid. Only jpg, png, and gif files under 5MB are accepted."),p(d=>({...d,propertyImages:n}))},N=async t=>{t.preventDefault();const a=new FormData;Object.keys(r).forEach(n=>{n==="address"?Object.keys(r.address).forEach(d=>{a.append(`address[${d}]`,r.address[d])}):n==="propertyImages"?r.propertyImages.forEach(d=>a.append("propertyImages",d)):a.append(n,r[n])});try{const n=await fetch("http://localhost:5000/api/properties",{method:"POST",body:a,headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!n.ok)throw new Error(await n.text());alert("Property added successfully!"),p({propertyName:"",rentPrice:"",propertyType:"",registeredOwner:"",areaMeasurement:"",commissionPercentage:"",depositPrice:"",description:"",locationSearch:"",address:{street:"",barangay:"",city:"",province:""},propertyNotes:"",units:0,bedrooms:0,bathrooms:0,selectedFeatures:[],propertyImages:[]})}catch(n){console.error(n),alert("Error adding property.")}};return e.jsxs(I,{className:"mt-5",children:[e.jsx("h4",{className:"mb-4",children:"Add New Property"}),e.jsxs(R,{children:[e.jsx(A,{children:e.jsxs(w,{variant:"tabs",className:"d-flex justify-content-between w-100",children:[e.jsx(f,{className:"flex-fill text-center",children:e.jsx(b,{className:"w-100",active:l===0,onClick:()=>h(0),children:"Basic Details"})}),e.jsx(f,{className:"flex-fill text-center",children:e.jsx(b,{className:"w-100",active:l===1,onClick:()=>h(1),children:"Location"})}),e.jsx(f,{className:"flex-fill text-center",children:e.jsx(b,{className:"w-100",active:l===2,onClick:()=>h(2),children:"Features & Amenities"})}),e.jsx(f,{className:"flex-fill text-center",children:e.jsx(b,{className:"w-100",active:l===3,onClick:()=>h(3),children:"Property Images"})})]})}),e.jsx(O,{children:e.jsxs(E,{onSubmit:N,children:[e.jsxs(q,{children:[e.jsxs(g,{visible:l===0,children:[e.jsxs(c,{className:"mb-3",children:[e.jsx(s,{md:6,children:e.jsx(i,{type:"text",name:"propertyName",placeholder:"Property Name",value:r.propertyName,onChange:o,required:!0})}),e.jsx(s,{md:6,children:e.jsx(i,{type:"number",name:"rentPrice",placeholder:"Rent Price (₱)",value:r.rentPrice,onChange:o,required:!0})})]}),e.jsxs(c,{className:"mb-3",children:[e.jsx(s,{md:6,children:e.jsxs(B,{name:"propertyType",value:r.propertyType,onChange:o,required:!0,children:[e.jsx("option",{value:"",children:"Select Property Type"}),M.map((t,a)=>e.jsx("option",{value:t,children:t},a))]})}),e.jsx(s,{md:6,children:e.jsx(i,{type:"text",name:"registeredOwner",placeholder:"Registered Property Owner",value:r.registeredOwner,onChange:o,required:!0})})]}),e.jsxs(c,{className:"mb-3",children:[e.jsx(s,{md:6,children:e.jsx(i,{type:"number",name:"areaMeasurement",placeholder:"Area Measurement (sqm)",value:r.areaMeasurement,onChange:o,required:!0})}),e.jsx(s,{md:6,children:e.jsx(i,{type:"number",name:"commissionPercentage",placeholder:"Agency Commission (%)",value:r.commissionPercentage,onChange:o,required:!0})})]}),e.jsxs(c,{className:"mb-3",children:[e.jsx(s,{md:6,children:e.jsx(i,{type:"number",name:"depositPrice",placeholder:"Deposit Price (₱)",value:r.depositPrice,onChange:o,required:!0})}),e.jsx(s,{md:6,children:e.jsx(T,{name:"description",placeholder:"Property Description",rows:"3",value:r.description,onChange:o,required:!0})})]})]}),e.jsxs(g,{visible:l===1,children:[e.jsx(c,{className:"mb-3",children:e.jsx(s,{md:12,children:e.jsx(i,{type:"text",name:"locationSearch",placeholder:"Search Location",value:r.locationSearch,onChange:o,required:!0})})}),e.jsxs(c,{className:"mb-3",children:[e.jsx(s,{md:6,children:e.jsx(i,{type:"text",name:"street",placeholder:"Street",value:r.address.street,onChange:x,required:!0})}),e.jsx(s,{md:6,children:e.jsx(i,{type:"text",name:"barangay",placeholder:"Barangay",value:r.address.barangay,onChange:x,required:!0})})]}),e.jsxs(c,{className:"mb-3",children:[e.jsx(s,{md:6,children:e.jsx(i,{type:"text",name:"city",placeholder:"City",value:r.address.city,onChange:x,required:!0})}),e.jsx(s,{md:6,children:e.jsx(i,{type:"text",name:"province",placeholder:"Province",value:r.address.province,onChange:x,required:!0})})]})]}),e.jsxs(g,{visible:l===2,children:[e.jsx(c,{className:"mb-3",children:e.jsx(s,{md:12,children:e.jsx(T,{name:"propertyNotes",placeholder:"Property Notes",rows:"3",value:r.propertyNotes,onChange:o,required:!0})})}),e.jsxs(c,{className:"mb-3",children:[e.jsx(s,{md:4,children:e.jsx(i,{type:"number",name:"units",placeholder:"Number of Units/Rooms",value:r.units,onChange:o,required:!0})}),e.jsx(s,{md:4,children:e.jsx(i,{type:"number",name:"bedrooms",placeholder:"Number of Bedrooms",value:r.bedrooms,onChange:o,required:!0})}),e.jsx(s,{md:4,children:e.jsx(i,{type:"number",name:"bathrooms",placeholder:"Number of Bathrooms",value:r.bathrooms,onChange:o,required:!0})})]}),e.jsx(c,{className:"mb-3",children:D.map((t,a)=>e.jsx(s,{md:4,children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:`feature-${a}`,checked:r.selectedFeatures.includes(t),onChange:()=>j(t)}),e.jsx("label",{className:"form-check-label",htmlFor:`feature-${a}`,children:t})]})},a))})]}),e.jsxs(g,{visible:l===3,children:[e.jsx(c,{className:"mb-3",children:e.jsx(s,{md:12,children:e.jsx(i,{type:"file",name:"propertyImages",multiple:!0,onChange:u,accept:".jpg,.png,.gif",required:!0})})}),e.jsx(c,{className:"mb-3",children:e.jsx(s,{md:12,children:e.jsx(i,{type:"file",name:"propertyImages",multiple:!0,onChange:u,accept:".jpg,.png,.gif",required:!0})})}),e.jsx(c,{className:"mb-3",children:e.jsx(s,{md:12,children:e.jsx(i,{type:"file",name:"propertyImages",multiple:!0,onChange:u,accept:".jpg,.png,.gif",required:!0})})}),e.jsx(c,{className:"mb-3",children:e.jsx(s,{md:12,children:e.jsx(i,{type:"file",name:"propertyImages",multiple:!0,onChange:u,accept:".jpg,.png,.gif",required:!0})})}),e.jsx(c,{className:"mb-3",children:e.jsx(s,{md:12,children:e.jsx(i,{type:"file",name:"propertyImages",multiple:!0,onChange:u,accept:".jpg,.png,.gif",required:!0})})}),e.jsx("small",{className:"text-muted",children:"Upload up to 5 images. Maximum file size: 5MB. Accepted formats: jpg, png, gif."})]})]}),e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx(k,{type:"submit",style:{backgroundColor:"#F28D35",color:"white",fontWeight:"bold"},children:"Add Property"})})]})})]})]})};export{J as default};
