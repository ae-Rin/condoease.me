import{b as w,u as v,c as k,r,j as e,l as S,C as m,a as L}from"./index-B1TMkdup.js";import{b as N}from"./index-BOEGd-tn.js";import{C as I,a as A}from"./CRow-BmigEusB.js";import{C as R}from"./CForm-C0xskRLS.js";import{C as g}from"./CFormInput-B-yijn9v.js";import{C as F,a as P}from"./CInputGroupText-BwSsFoxj.js";const B=()=>{var d;const p=w(),a=v(),{setUser:u}=k(),n="https://condoease-backend.onrender.com",x=((d=p.state)==null?void 0:d.email)||"",[l,h]=r.useState(x),[i,f]=r.useState(""),[b,y]=r.useState(!1),[c,j]=r.useState(!1),C=async s=>{s.preventDefault();try{const o=await fetch(`${n}/api/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l,password:i})}),t=await o.json();console.log("API URL:",n),o.ok&&t.token?(console.log("%c[Login2] Login successful!","color: green"),console.log("Token:",t.token),console.log("User:",t.user),localStorage.setItem("authToken",t.token),u(t.user),alert("Login successful!"),a("/cards",{replace:!0})):alert(t.error||"Invalid email or password.")}catch(o){console.error("Login error:",o),alert("Server error. Please try again later.")}};return e.jsxs("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-column",style:{minHeight:"100vh"},children:[e.jsxs("div",{style:{background:"#1D2B57",height:80,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 50px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx("img",{src:S,alt:"CondoEase Logo",style:{height:64,marginRight:12}})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:34},children:[e.jsx("span",{style:{color:"white",fontSize:20},children:"Don't have an account?"}),e.jsx(m,{className:"text-white fw-bold px-4",style:{borderRadius:20,fontSize:20,backgroundColor:"#F28D35"},onClick:()=>a("/register"),children:"Sign up"})]})]}),e.jsx(L,{className:"flex-grow-1 d-flex flex-column align-items-center justify-content-center",children:e.jsx(I,{className:"justify-content-center w-100",children:e.jsxs(A,{xs:12,md:7,lg:5,xl:4,children:[e.jsx("div",{className:"text-center mb-4 mt-5",children:e.jsx("h2",{className:"fw-bold mb-2 text-start",style:{fontSize:32},children:"Login"})}),e.jsxs(R,{onSubmit:C,children:[e.jsx("div",{className:"mb-2 fw-semibold text-start",children:"Email"}),e.jsx(g,{type:"email",placeholder:"email@gmail.com",value:l,onChange:s=>h(s.target.value),className:"mb-3",required:!0,style:{borderColor:"#A3C49A",borderRadius:10,fontSize:16,padding:"16px 16px"}}),e.jsx("div",{className:"mb-2 fw-semibold text-start",children:"Password"}),e.jsxs(F,{className:"mb-3",children:[e.jsx(g,{type:b?"text":"password",placeholder:"Enter your password",value:i,onChange:s=>f(s.target.value),required:!0,style:{borderColor:"#A3C49A",borderRadius:10,fontSize:16,padding:"16px 16px"}}),e.jsx(P,{style:{background:"transparent",cursor:"pointer",borderColor:"#A3C49A"},onClick:()=>y(s=>!s),children:e.jsx(N,{color:"#A3C49A"})})]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsxs("div",{children:[e.jsx("input",{type:"checkbox",id:"keepLoggedIn",checked:c,onChange:()=>j(!c),style:{marginRight:8}}),e.jsx("label",{htmlFor:"keepLoggedIn",style:{fontSize:14},children:"Keep me logged in for 30 days"})]}),e.jsx("button",{type:"button",className:"btn p-0",style:{color:"#F28D35",fontWeight:700,fontSize:14,background:"none",border:"none"},onClick:()=>a("/forgot-password"),children:"Forgot Password?"})]}),e.jsx("div",{className:"d-grid mb-2 mt-4",children:e.jsx(m,{className:"text-white fw-bold",style:{borderRadius:50,fontSize:25,padding:"13px 0",width:"90%",margin:"0 auto",backgroundColor:"#F28D35"},type:"submit",children:"Login"})})]})]})})})]})};export{B as default};
