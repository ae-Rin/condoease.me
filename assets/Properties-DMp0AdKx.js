import{r as f,_ as N,R as v,d as P,e as w,P as m,g as F,T as I,j as e,a as R,p as b,q as C,C as k}from"./index-B1TMkdup.js";import{C as A,a as E}from"./CCardBody-CjBCf2Dl.js";import{C as O}from"./CCardHeader-BG9aoiQw.js";import{C as B}from"./CForm-C0xskRLS.js";import{C as d,a as t}from"./CRow-BmigEusB.js";import{C as o}from"./CFormInput-B-yijn9v.js";import{C as M}from"./CFormSelect-DO-_tGit.js";import{C as S}from"./CFormTextarea-BEzZRkUJ.js";var q=f.forwardRef(function(a,h){var r,p=a.children,i=a.as,x=i===void 0?"ul":i,g=a.className,u=a.layout,j=a.variant,n=N(a,["children","as","className","layout","variant"]);return v.createElement(x,P({className:w("nav",j==="enclosed-pills"&&"nav-enclosed",(r={},r["nav-".concat(u)]=u,r["nav-".concat(j)]=j,r),g),role:"navigation"},n,{ref:h}),p)});q.propTypes={as:m.elementType,children:m.node,className:m.string,layout:m.oneOf(["fill","justified"]),variant:m.oneOf(["enclosed","enclosed-pills","pills","tabs","underline","underline-border"])};q.displayName="CNav";var T=f.forwardRef(function(a,h){var r=a.children,p=a.className,i=N(a,["children","className"]);return v.createElement("div",P({className:w("tab-content",p)},i,{ref:h}),r)});T.propTypes={children:m.node,className:m.string};T.displayName="CTabContent";var y=f.forwardRef(function(a,h){var r=a.children,p=a.className,i=a.onHide,x=a.onShow,g=a.transition,u=g===void 0?!0:g,j=a.visible,n=N(a,["children","className","onHide","onShow","transition","visible"]),s=f.useRef(null),l=F(h,s);return v.createElement(I,{in:j,nodeRef:s,onEnter:x,onExit:i,timeout:150},function(c){return v.createElement("div",P({className:w("tab-pane",{active:j,fade:u,show:c==="entered"},p)},n,{ref:l}),r)})});y.propTypes={children:m.node,className:m.string,onHide:m.func,onShow:m.func,transition:m.bool,visible:m.bool};y.displayName="CTabPane";const D=["Apartment","Condo","House","Townhouse","Studio"],H=["Air Conditioned","Car Parking","Laundry Room","Balcony","Gym","Internet","Garden","Swimming Pool","Pets Allowed"],J=()=>{const[a,h]=f.useState(0),[r,p]=f.useState({propertyName:"",rentPrice:"",propertyType:"",registeredOwner:"",areaMeasurement:"",commissionPercentage:"",depositPrice:"",description:"",locationSearch:"",address:{street:"",barangay:"",city:"",province:""},propertyNotes:"",units:0,bedrooms:0,bathrooms:0,selectedFeatures:[],propertyImages:[]}),i=n=>{const{name:s,value:l}=n.target;p(c=>({...c,[s]:l}))},x=n=>{const{name:s,value:l}=n.target;p(c=>({...c,address:{...c.address,[s]:l}}))},g=n=>{p(s=>({...s,selectedFeatures:s.selectedFeatures.includes(n)?s.selectedFeatures.filter(l=>l!==n):[...s.selectedFeatures,n]}))},u=n=>{const s=Array.from(n.target.files);if(s.length>5){alert("You can upload a maximum of 5 images.");return}const l=s.filter(c=>c.size<=5*1024*1024&&["image/jpeg","image/png","image/gif"].includes(c.type));l.length!==s.length&&alert("Some files are invalid. Only jpg, png, and gif files under 5MB are accepted."),p(c=>({...c,propertyImages:l}))},j=async n=>{n.preventDefault();const s=new FormData;Object.keys(r).forEach(l=>{l==="address"?Object.keys(r.address).forEach(c=>{s.append(`address[${c}]`,r.address[c])}):l==="propertyImages"?r.propertyImages.forEach(c=>s.append("propertyImages",c)):s.append(l,r[l])});try{const l=await fetch("http://localhost:5000/api/properties",{method:"POST",body:s,headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!l.ok)throw new Error(await l.text());alert("Property added successfully!"),p({propertyName:"",rentPrice:"",propertyType:"",registeredOwner:"",areaMeasurement:"",commissionPercentage:"",depositPrice:"",description:"",locationSearch:"",address:{street:"",barangay:"",city:"",province:""},propertyNotes:"",units:0,bedrooms:0,bathrooms:0,selectedFeatures:[],propertyImages:[]})}catch(l){console.error(l),alert("Error adding property.")}};return e.jsxs(R,{className:"mt-5",children:[e.jsx("h4",{className:"mb-4",children:"Add New Property"}),e.jsxs(A,{children:[e.jsx(O,{children:e.jsxs(q,{variant:"tabs",className:"d-flex justify-content-between w-100",children:[e.jsx(b,{className:"flex-fill text-center",children:e.jsx(C,{className:"w-100",active:a===0,onClick:()=>h(0),children:"Basic Details"})}),e.jsx(b,{className:"flex-fill text-center",children:e.jsx(C,{className:"w-100",active:a===1,onClick:()=>h(1),children:"Location"})}),e.jsx(b,{className:"flex-fill text-center",children:e.jsx(C,{className:"w-100",active:a===2,onClick:()=>h(2),children:"Features & Amenities"})}),e.jsx(b,{className:"flex-fill text-center",children:e.jsx(C,{className:"w-100",active:a===3,onClick:()=>h(3),children:"Property Images"})})]})}),e.jsx(E,{children:e.jsxs(B,{onSubmit:j,children:[e.jsxs(T,{children:[e.jsxs(y,{visible:a===0,children:[e.jsxs(d,{className:"mb-3",children:[e.jsx(t,{md:6,children:e.jsx(o,{type:"text",name:"propertyName",placeholder:"Property Name",value:r.propertyName,onChange:i,required:!0})}),e.jsx(t,{md:6,children:e.jsx(o,{type:"number",name:"rentPrice",placeholder:"Rent Price (₱)",value:r.rentPrice,onChange:i,required:!0})})]}),e.jsxs(d,{className:"mb-3",children:[e.jsx(t,{md:6,children:e.jsxs(M,{name:"propertyType",value:r.propertyType,onChange:i,required:!0,children:[e.jsx("option",{value:"",children:"Select Property Type"}),D.map((n,s)=>e.jsx("option",{value:n,children:n},s))]})}),e.jsx(t,{md:6,children:e.jsx(o,{type:"text",name:"registeredOwner",placeholder:"Registered Property Owner",value:r.registeredOwner,onChange:i,required:!0})})]}),e.jsxs(d,{className:"mb-3",children:[e.jsx(t,{md:6,children:e.jsx(o,{type:"number",name:"areaMeasurement",placeholder:"Area Measurement (sqm)",value:r.areaMeasurement,onChange:i,required:!0})}),e.jsx(t,{md:6,children:e.jsx(o,{type:"number",name:"commissionPercentage",placeholder:"Agency Commission (%)",value:r.commissionPercentage,onChange:i,required:!0})})]}),e.jsxs(d,{className:"mb-3",children:[e.jsx(t,{md:6,children:e.jsx(o,{type:"number",name:"depositPrice",placeholder:"Deposit Price (₱)",value:r.depositPrice,onChange:i,required:!0})}),e.jsx(t,{md:6,children:e.jsx(S,{name:"description",placeholder:"Property Description",rows:"3",value:r.description,onChange:i,required:!0})})]})]}),e.jsxs(y,{visible:a===1,children:[e.jsx(d,{className:"mb-3",children:e.jsx(t,{md:12,children:e.jsx(o,{type:"text",name:"locationSearch",placeholder:"Search Location",value:r.locationSearch,onChange:i,required:!0})})}),e.jsxs(d,{className:"mb-3",children:[e.jsx(t,{md:6,children:e.jsx(o,{type:"text",name:"street",placeholder:"Street",value:r.address.street,onChange:x,required:!0})}),e.jsx(t,{md:6,children:e.jsx(o,{type:"text",name:"barangay",placeholder:"Barangay",value:r.address.barangay,onChange:x,required:!0})})]}),e.jsxs(d,{className:"mb-3",children:[e.jsx(t,{md:6,children:e.jsx(o,{type:"text",name:"city",placeholder:"City",value:r.address.city,onChange:x,required:!0})}),e.jsx(t,{md:6,children:e.jsx(o,{type:"text",name:"province",placeholder:"Province",value:r.address.province,onChange:x,required:!0})})]})]}),e.jsxs(y,{visible:a===2,children:[e.jsx(d,{className:"mb-3",children:e.jsx(t,{md:12,children:e.jsx(S,{name:"propertyNotes",placeholder:"Property Notes",rows:"3",value:r.propertyNotes,onChange:i,required:!0})})}),e.jsxs(d,{className:"mb-3",children:[e.jsx(t,{md:4,children:e.jsx(o,{type:"number",name:"units",placeholder:"Number of Units/Rooms",value:r.units,onChange:i,required:!0})}),e.jsx(t,{md:4,children:e.jsx(o,{type:"number",name:"bedrooms",placeholder:"Number of Bedrooms",value:r.bedrooms,onChange:i,required:!0})}),e.jsx(t,{md:4,children:e.jsx(o,{type:"number",name:"bathrooms",placeholder:"Number of Bathrooms",value:r.bathrooms,onChange:i,required:!0})})]}),e.jsx(d,{className:"mb-3",children:H.map((n,s)=>e.jsx(t,{md:4,children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:`feature-${s}`,checked:r.selectedFeatures.includes(n),onChange:()=>g(n)}),e.jsx("label",{className:"form-check-label",htmlFor:`feature-${s}`,children:n})]})},s))})]}),e.jsxs(y,{visible:a===3,children:[e.jsx(d,{className:"mb-3",children:e.jsx(t,{md:12,children:e.jsx(o,{type:"file",name:"propertyImages",multiple:!0,onChange:u,accept:".jpg,.png,.gif",required:!0})})}),e.jsx(d,{className:"mb-3",children:e.jsx(t,{md:12,children:e.jsx(o,{type:"file",name:"propertyImages",multiple:!0,onChange:u,accept:".jpg,.png,.gif",required:!0})})}),e.jsx(d,{className:"mb-3",children:e.jsx(t,{md:12,children:e.jsx(o,{type:"file",name:"propertyImages",multiple:!0,onChange:u,accept:".jpg,.png,.gif",required:!0})})}),e.jsx(d,{className:"mb-3",children:e.jsx(t,{md:12,children:e.jsx(o,{type:"file",name:"propertyImages",multiple:!0,onChange:u,accept:".jpg,.png,.gif",required:!0})})}),e.jsx(d,{className:"mb-3",children:e.jsx(t,{md:12,children:e.jsx(o,{type:"file",name:"propertyImages",multiple:!0,onChange:u,accept:".jpg,.png,.gif",required:!0})})}),e.jsx("small",{className:"text-muted",children:"Upload up to 5 images. Maximum file size: 5MB. Accepted formats: jpg, png, gif."})]})]}),e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx(k,{type:"submit",style:{backgroundColor:"#F28D35",color:"white",fontWeight:"bold"},children:"Add Property"})})]})})]})]})};export{J as default};
