import{r as i,j as e,a as b,C as c}from"./index-CN9xzlIl.js";import{b as p,c as C,d as f}from"./index-Drb14SIn.js";import{C as T,a as g}from"./CRow-CR41xOLq.js";import{C as y,a as w,b as n,c as a,d as E,e as t}from"./CTable-2594SlFK.js";const B=()=>{const[o,h]=i.useState([]),[x,d]=i.useState(!0);i.useEffect(()=>{(async()=>{try{const r=await(await fetch("http://localhost:5000/api/leases",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}})).json();h(r),d(!1)}catch(l){console.error("Error fetching leases:",l),d(!1)}})()},[]);const j=s=>{alert(`View details for lease ID: ${s}`)},m=s=>{alert(`Edit details for lease ID: ${s}`)},u=s=>{window.confirm("Are you sure you want to delete this lease?")&&alert(`Lease ID ${s} deleted`)},_=s=>Object.values(s).reduce((l,r)=>l+(parseFloat(r)||0),0);return e.jsxs(b,{className:"mt-5",children:[e.jsx("h4",{className:"mb-4",children:"Leases / Tenancy"}),e.jsx(T,{children:e.jsx(g,{children:e.jsxs(y,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(w,{children:e.jsxs(n,{children:[e.jsx(a,{children:"Unit Type"}),e.jsx(a,{children:"Unit Number"}),e.jsx(a,{children:"Tenant"}),e.jsx(a,{children:"Start Date"}),e.jsx(a,{children:"End Date"}),e.jsx(a,{children:"Rent Price"}),e.jsx(a,{children:"Total Bills"}),e.jsx(a,{children:"Action"})]})}),e.jsx(E,{children:x?e.jsx(n,{children:e.jsx(t,{colSpan:"8",className:"text-center",children:"Loading leases..."})},"loading"):o.length===0?e.jsx(n,{children:e.jsx(t,{colSpan:"8",className:"text-center",children:"No leases found."})},"no-data"):o.map(s=>e.jsxs(n,{children:[e.jsx(t,{children:s.unit_type}),e.jsx(t,{children:s.unit_number}),e.jsx(t,{children:s.tenant_email}),e.jsx(t,{children:s.start_date.split("T")[0]}),e.jsx(t,{children:s.end_date.split("T")[0]}),e.jsxs(t,{children:["₱",s.rent_price]}),e.jsxs(t,{children:["₱",_({bill_gas_amount:s.bill_gas_amount,bill_electricity_amount:s.bill_electricity_amount,bill_internet_amount:s.bill_internet_amount,bill_tax_amount:s.bill_tax_amount})]}),e.jsxs(t,{children:[e.jsx(c,{color:"info",size:"sm",className:"me-2",onClick:()=>j(s.lease_id),children:e.jsx(p,{})}),e.jsx(c,{color:"warning",size:"sm",className:"me-2",onClick:()=>m(s.lease_id),children:e.jsx(C,{})}),e.jsx(c,{color:"danger",size:"sm",onClick:()=>u(s.lease_id),children:e.jsx(f,{})})]})]},s.lease_id))})]})})})]})};export{B as default};
