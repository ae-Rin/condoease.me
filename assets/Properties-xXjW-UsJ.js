import{r as g,_ as w,R as N,e as q,f as S,P as h,g as T,T as F,j as e,a as I,o as b,p as C,C as k}from"./index-CcmT5oz_.js";import{C as R,a as A}from"./CCardBody-C1Z7zhob.js";import{C as E}from"./CCardHeader-Dh1hZO44.js";import{C as B}from"./CNav-D_UrEHGG.js";import{C as O}from"./CForm-lG-pmH86.js";import{C as d,a}from"./CRow-o7nzLZc-.js";import{C as o}from"./CFormInput-SdDmY_RP.js";import{C as M}from"./CFormSelect-kqwZBbbU.js";import{C as P}from"./CFormTextarea-JmGY_Q9P.js";import"./CFormControlWrapper-C-F8eBac.js";var v=g.forwardRef(function(t,p){var r=t.children,m=t.className,l=w(t,["children","className"]);return N.createElement("div",q({className:S("tab-content",m)},l,{ref:p}),r)});v.propTypes={children:h.node,className:h.string};v.displayName="CTabContent";var j=g.forwardRef(function(t,p){var r=t.children,m=t.className,l=t.onHide,x=t.onShow,y=t.transition,u=y===void 0?!0:y,f=t.visible,n=w(t,["children","className","onHide","onShow","transition","visible"]),s=g.useRef(null),i=T(p,s);return N.createElement(F,{in:f,nodeRef:s,onEnter:x,onExit:l,timeout:150},function(c){return N.createElement("div",q({className:S("tab-pane",{active:f,fade:u,show:c==="entered"},m)},n,{ref:i}),r)})});j.propTypes={children:h.node,className:h.string,onHide:h.func,onShow:h.func,transition:h.bool,visible:h.bool};j.displayName="CTabPane";const D=["Apartment","Condo","House","Townhouse","Studio"],H=["Air Conditioned","Car Parking","Laundry Room","Balcony","Gym","Internet","Garden","Swimming Pool","Pets Allowed"],X=()=>{const[t,p]=g.useState(0),[r,m]=g.useState({propertyName:"",rentPrice:"",propertyType:"",registeredOwner:"",areaMeasurement:"",commissionPercentage:"",depositPrice:"",description:"",locationSearch:"",address:{street:"",barangay:"",city:"",province:""},propertyNotes:"",units:0,bedrooms:0,bathrooms:0,selectedFeatures:[],propertyImages:[]}),l=n=>{const{name:s,value:i}=n.target;m(c=>({...c,[s]:i}))},x=n=>{const{name:s,value:i}=n.target;m(c=>({...c,address:{...c.address,[s]:i}}))},y=n=>{m(s=>({...s,selectedFeatures:s.selectedFeatures.includes(n)?s.selectedFeatures.filter(i=>i!==n):[...s.selectedFeatures,n]}))},u=n=>{const s=Array.from(n.target.files);if(s.length>5){alert("You can upload a maximum of 5 images.");return}const i=s.filter(c=>c.size<=5*1024*1024&&["image/jpeg","image/png","image/gif"].includes(c.type));i.length!==s.length&&alert("Some files are invalid. Only jpg, png, and gif files under 5MB are accepted."),m(c=>({...c,propertyImages:i}))},f=async n=>{n.preventDefault();const s=new FormData;Object.keys(r).forEach(i=>{i==="address"?Object.keys(r.address).forEach(c=>{s.append(`address[${c}]`,r.address[c])}):i==="propertyImages"?r.propertyImages.forEach(c=>s.append("propertyImages",c)):s.append(i,r[i])});try{const i=await fetch("http://localhost:5000/api/properties",{method:"POST",body:s,headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!i.ok)throw new Error(await i.text());alert("Property added successfully!"),m({propertyName:"",rentPrice:"",propertyType:"",registeredOwner:"",areaMeasurement:"",commissionPercentage:"",depositPrice:"",description:"",locationSearch:"",address:{street:"",barangay:"",city:"",province:""},propertyNotes:"",units:0,bedrooms:0,bathrooms:0,selectedFeatures:[],propertyImages:[]})}catch(i){console.error(i),alert("Error adding property.")}};return e.jsxs(I,{className:"mt-5",children:[e.jsx("h4",{className:"mb-4",children:"Add New Property"}),e.jsxs(R,{children:[e.jsx(E,{children:e.jsxs(B,{variant:"tabs",className:"d-flex justify-content-between w-100",children:[e.jsx(b,{className:"flex-fill text-center",children:e.jsx(C,{className:"w-100",active:t===0,onClick:()=>p(0),children:"Basic Details"})}),e.jsx(b,{className:"flex-fill text-center",children:e.jsx(C,{className:"w-100",active:t===1,onClick:()=>p(1),children:"Location"})}),e.jsx(b,{className:"flex-fill text-center",children:e.jsx(C,{className:"w-100",active:t===2,onClick:()=>p(2),children:"Features & Amenities"})}),e.jsx(b,{className:"flex-fill text-center",children:e.jsx(C,{className:"w-100",active:t===3,onClick:()=>p(3),children:"Property Images"})})]})}),e.jsx(A,{children:e.jsxs(O,{onSubmit:f,children:[e.jsxs(v,{children:[e.jsxs(j,{visible:t===0,children:[e.jsxs(d,{className:"mb-3",children:[e.jsx(a,{md:6,children:e.jsx(o,{type:"text",name:"propertyName",placeholder:"Property Name",value:r.propertyName,onChange:l,required:!0})}),e.jsx(a,{md:6,children:e.jsx(o,{type:"number",name:"rentPrice",placeholder:"Rent Price (₱)",value:r.rentPrice,onChange:l,required:!0})})]}),e.jsxs(d,{className:"mb-3",children:[e.jsx(a,{md:6,children:e.jsxs(M,{name:"propertyType",value:r.propertyType,onChange:l,required:!0,children:[e.jsx("option",{value:"",children:"Select Property Type"}),D.map((n,s)=>e.jsx("option",{value:n,children:n},s))]})}),e.jsx(a,{md:6,children:e.jsx(o,{type:"text",name:"registeredOwner",placeholder:"Registered Property Owner",value:r.registeredOwner,onChange:l,required:!0})})]}),e.jsxs(d,{className:"mb-3",children:[e.jsx(a,{md:6,children:e.jsx(o,{type:"number",name:"areaMeasurement",placeholder:"Area Measurement (sqm)",value:r.areaMeasurement,onChange:l,required:!0})}),e.jsx(a,{md:6,children:e.jsx(o,{type:"number",name:"commissionPercentage",placeholder:"Agency Commission (%)",value:r.commissionPercentage,onChange:l,required:!0})})]}),e.jsxs(d,{className:"mb-3",children:[e.jsx(a,{md:6,children:e.jsx(o,{type:"number",name:"depositPrice",placeholder:"Deposit Price (₱)",value:r.depositPrice,onChange:l,required:!0})}),e.jsx(a,{md:6,children:e.jsx(P,{name:"description",placeholder:"Property Description",rows:"3",value:r.description,onChange:l,required:!0})})]})]}),e.jsxs(j,{visible:t===1,children:[e.jsx(d,{className:"mb-3",children:e.jsx(a,{md:12,children:e.jsx(o,{type:"text",name:"locationSearch",placeholder:"Search Location",value:r.locationSearch,onChange:l,required:!0})})}),e.jsxs(d,{className:"mb-3",children:[e.jsx(a,{md:6,children:e.jsx(o,{type:"text",name:"street",placeholder:"Street",value:r.address.street,onChange:x,required:!0})}),e.jsx(a,{md:6,children:e.jsx(o,{type:"text",name:"barangay",placeholder:"Barangay",value:r.address.barangay,onChange:x,required:!0})})]}),e.jsxs(d,{className:"mb-3",children:[e.jsx(a,{md:6,children:e.jsx(o,{type:"text",name:"city",placeholder:"City",value:r.address.city,onChange:x,required:!0})}),e.jsx(a,{md:6,children:e.jsx(o,{type:"text",name:"province",placeholder:"Province",value:r.address.province,onChange:x,required:!0})})]})]}),e.jsxs(j,{visible:t===2,children:[e.jsx(d,{className:"mb-3",children:e.jsx(a,{md:12,children:e.jsx(P,{name:"propertyNotes",placeholder:"Property Notes",rows:"3",value:r.propertyNotes,onChange:l,required:!0})})}),e.jsxs(d,{className:"mb-3",children:[e.jsx(a,{md:4,children:e.jsx(o,{type:"number",name:"units",placeholder:"Number of Units/Rooms",value:r.units,onChange:l,required:!0})}),e.jsx(a,{md:4,children:e.jsx(o,{type:"number",name:"bedrooms",placeholder:"Number of Bedrooms",value:r.bedrooms,onChange:l,required:!0})}),e.jsx(a,{md:4,children:e.jsx(o,{type:"number",name:"bathrooms",placeholder:"Number of Bathrooms",value:r.bathrooms,onChange:l,required:!0})})]}),e.jsx(d,{className:"mb-3",children:H.map((n,s)=>e.jsx(a,{md:4,children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:`feature-${s}`,checked:r.selectedFeatures.includes(n),onChange:()=>y(n)}),e.jsx("label",{className:"form-check-label",htmlFor:`feature-${s}`,children:n})]})},s))})]}),e.jsxs(j,{visible:t===3,children:[e.jsx(d,{className:"mb-3",children:e.jsx(a,{md:12,children:e.jsx(o,{type:"file",name:"propertyImages",multiple:!0,onChange:u,accept:".jpg,.png,.gif",required:!0})})}),e.jsx(d,{className:"mb-3",children:e.jsx(a,{md:12,children:e.jsx(o,{type:"file",name:"propertyImages",multiple:!0,onChange:u,accept:".jpg,.png,.gif",required:!0})})}),e.jsx(d,{className:"mb-3",children:e.jsx(a,{md:12,children:e.jsx(o,{type:"file",name:"propertyImages",multiple:!0,onChange:u,accept:".jpg,.png,.gif",required:!0})})}),e.jsx(d,{className:"mb-3",children:e.jsx(a,{md:12,children:e.jsx(o,{type:"file",name:"propertyImages",multiple:!0,onChange:u,accept:".jpg,.png,.gif",required:!0})})}),e.jsx(d,{className:"mb-3",children:e.jsx(a,{md:12,children:e.jsx(o,{type:"file",name:"propertyImages",multiple:!0,onChange:u,accept:".jpg,.png,.gif",required:!0})})}),e.jsx("small",{className:"text-muted",children:"Upload up to 5 images. Maximum file size: 5MB. Accepted formats: jpg, png, gif."})]})]}),e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx(k,{type:"submit",style:{backgroundColor:"#F28D35",color:"white",fontWeight:"bold"},children:"Add Property"})})]})})]})]})};export{X as default};
