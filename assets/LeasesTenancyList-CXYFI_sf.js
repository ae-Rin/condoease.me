import{r as i,j as e,a as p,C as c}from"./index-K-Ynpg65.js";import{b as C,c as T,d as w}from"./index-Bq0li85K.js";import{C as y,a as g}from"./CRow-C5onMkAO.js";import{C as E,a as L,b as r,c as a,d as D,e as t}from"./CTable-BlTRnG9t.js";const F=()=>{const o="https://condoease-backends.onrender.com",[d,h]=i.useState([]),[x,j]=i.useState(!0);i.useEffect(()=>{(async()=>{try{const n=await fetch(`${o}/api/leases`,{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!n.ok){const b=await n.json();throw new Error(b.error||"Failed to fetch leases")}const l=await n.json();h(l)}catch(n){console.error("Error fetching list of lease:",n)}finally{j(!1)}})()},[o]);const m=s=>{alert(`View details for lease ID: ${s}`)},u=s=>{alert(`Edit details for lease ID: ${s}`)},_=s=>{window.confirm("Are you sure you want to delete this lease?")&&alert(`Lease ID ${s} deleted`)},f=s=>Object.values(s).reduce((n,l)=>n+(parseFloat(l)||0),0);return e.jsxs(p,{className:"mt-5",children:[e.jsx("h4",{className:"mb-4",children:"Leases / Tenancy"}),e.jsx(y,{children:e.jsx(g,{children:e.jsxs(E,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(L,{children:e.jsxs(r,{children:[e.jsx(a,{children:"Unit Type"}),e.jsx(a,{children:"Unit Number"}),e.jsx(a,{children:"Tenant"}),e.jsx(a,{children:"Start Date"}),e.jsx(a,{children:"End Date"}),e.jsx(a,{children:"Rent Price"}),e.jsx(a,{children:"Total Bills"}),e.jsx(a,{children:"Action"})]})}),e.jsx(D,{children:x?e.jsx(r,{children:e.jsx(t,{colSpan:"8",className:"text-center",children:"Loading leases..."})},"loading"):d.length===0?e.jsx(r,{children:e.jsx(t,{colSpan:"8",className:"text-center",children:"No leases found."})},"no-data"):d.map(s=>e.jsxs(r,{children:[e.jsx(t,{children:s.unit_type}),e.jsx(t,{children:s.unit_number}),e.jsx(t,{children:s.tenant_email}),e.jsx(t,{children:s.start_date.split("T")[0]}),e.jsx(t,{children:s.end_date.split("T")[0]}),e.jsxs(t,{children:["₱",s.rent_price]}),e.jsxs(t,{children:["₱",f({bill_gas_amount:s.bill_gas_amount,bill_electricity_amount:s.bill_electricity_amount,bill_internet_amount:s.bill_internet_amount,bill_tax_amount:s.bill_tax_amount})]}),e.jsxs(t,{children:[e.jsx(c,{color:"info",size:"sm",className:"me-2",onClick:()=>m(s.lease_id),children:e.jsx(C,{})}),e.jsx(c,{color:"warning",size:"sm",className:"me-2",onClick:()=>u(s.lease_id),children:e.jsx(T,{})}),e.jsx(c,{color:"danger",size:"sm",onClick:()=>_(s.lease_id),children:e.jsx(w,{})})]})]},s.lease_id))})]})})})]})};export{F as default};
