import{r as o,j as e,a as u,C as l}from"./index-CIjTItgH.js";import{b as C,c as y,d as w}from"./index-B8VcS973.js";import{C as g,a as b}from"./CRow-C0R9k1kt.js";import{C as _,a as $,b as a,c as t,d as E,e as s}from"./CTable-BKwUVwQq.js";const O=()=>{const[c,d]=o.useState([]),[h,x]=o.useState(!0);o.useEffect(()=>{(async()=>{try{const n=await fetch("http://localhost:5000/api/property-owners",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(!n.ok){const f=await n.json();console.error("Fetch error:",f);return}const i=await n.json();Array.isArray(i)?d(i):console.error("Unexpected response format:",i)}catch(n){console.error("Error fetching property owners:",n)}finally{x(!1)}})()},[]);const j=r=>{alert(`View details for owner ID: ${r}`)},m=r=>{alert(`Edit details for owner ID: ${r}`)},p=r=>{window.confirm("Are you sure you want to delete this property owner?")&&alert(`Owner ID ${r} deleted`)};return e.jsxs(u,{className:"mt-5",children:[e.jsx("h4",{className:"mb-4",children:"Registered Property Owners"}),e.jsx(g,{children:e.jsx(b,{children:e.jsxs(_,{striped:!0,hover:!0,responsive:!0,children:[e.jsx($,{children:e.jsxs(a,{children:[e.jsx(t,{children:"Fullname"}),e.jsx(t,{children:"Email"}),e.jsx(t,{children:"Contact Number"}),e.jsx(t,{children:"Address"}),e.jsx(t,{children:"Statistics"}),e.jsx(t,{children:"Action"})]})}),e.jsx(E,{children:h?e.jsx(a,{children:e.jsx(s,{colSpan:"8",className:"text-center",children:"Loading property owners..."})},"loading"):c.length===0?e.jsx(a,{children:e.jsx(s,{colSpan:"8",className:"text-center",children:"No property owners found."})},"no-data"):e.jsx(e.Fragment,{children:c.map(r=>e.jsxs(a,{children:[e.jsx(s,{children:`${r.first_name} ${r.last_name}`}),e.jsx(s,{children:r.email}),e.jsx(s,{children:r.contact_number}),e.jsx(s,{children:`${r.street}, ${r.barangay}, ${r.city}, ${r.province}`}),e.jsxs(s,{children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Properties:"})," ",r.number_of_properties||0]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Units:"})," ",r.number_of_units||0]})]}),e.jsxs(s,{children:[e.jsx(l,{color:"info",size:"sm",className:"me-2",onClick:()=>j(r.owner_id),children:e.jsx(C,{})}),e.jsx(l,{color:"warning",size:"sm",className:"me-2",onClick:()=>m(r.owner_id),children:e.jsx(y,{})}),e.jsx(l,{color:"danger",size:"sm",onClick:()=>p(r.owner_id),children:e.jsx(w,{})})]})]},r.owner_id))})})]})})})]})};export{O as default};
